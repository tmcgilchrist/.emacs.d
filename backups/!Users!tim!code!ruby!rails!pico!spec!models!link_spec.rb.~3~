require 'spec_helper'

describe Link do
  it 'should save given the correct attributes' do
    Link.create! :original_url => 'www.google.com'
  end

  it 'should require an original_url' do
    no_url = Link.new 
    no_url.should_not be_valid
  end
  
  it 'should generate a unique short_url' do
    link = Link.create! :original_url => 'www.google.com'
    puts "link.short_url #{link.short_url}"
    link.short_url.should_not be_blank
  end

  it 'should map same url to same short_url' do
    link1 = Link.create! :original_url => 'www.google.com'
    link2 = Link.create! :original_url => 'www.google.com'

    link1.short_url.should eql(link2.short_url)
  end

  it 'should map different urls to different short_urls' do
    link1 = Link.create! :original_url => 'www.google.com'
    link2 = Link.create! :original_url => 'www.something.com'
    
    link1.id.should_not eql(link2.id)
    link1.short_url.should_not eql(link2.short_url)
  end
end
