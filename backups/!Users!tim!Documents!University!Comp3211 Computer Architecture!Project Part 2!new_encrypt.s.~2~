-- key is store in data memeory locations 0 - 7
-- characters are store in data memory locations 8+

	ldi	$r0, (0x07)		; location of the first character - 1
	ldi	$r1, (0x01)		; load one to be used for incrementing
	ldi	$r2, (0x00)		; load constant C

--loops starts here

	add	$r0, $r0, $r1   ; Increment input location
        nop
	ldr	$r3, $r0		; Load input

    ldi	$r4, (0x00)		; Load start address of encryption key
        nop
	ldr	$r5, $r4		; Load encrytion key


    xor	$r3, $r3, $r5		; $r3 = A
        nop
	add	$r6, $r3, $r2           ; $r6 = A + C
        nop
	lsl	$r6, $r6		; $r6 = mod16(A + C) & 0000 
	lsr	$r3, $r3		; $r3 = 0000 & Ah
        nop
	add	$r3, $r3, $r6		; Concatenation

    add	$r4, $r4, $r1		; Increment to next key part
        nop
	ldr	$r5, $r4		; Load encrytion key

--2
	xor	$r3, $r3, $r5		; $r3 = A
	add	$r6, $r3, $r2           ; $r6 = A + C
	lsl	$r6, $r6		; $r6 = mod16(A + C) & 0000 
	lsr	$r3, $r3		; $r3 = 0000 & Ah
	add	$r3, $r3, $r6		; Concatenation

     	add	$r4, $r4, $r1		; Increment to next key part
	ldr	$r5, $r4		; Load encrytion key
--3
	xor	$r3, $r3, $r5		; $r3 = A
	add	$r6, $r3, $r2           ; $r6 = A + C
	lsl	$r6, $r6		; $r6 = mod16(A + C) & 0000 
	lsr	$r3, $r3		; $r3 = 0000 & Ah
	add	$r3, $r3, $r6		; Concatenation

     	add	$r4, $r4, $r1		; Increment to next key part
	ldr	$r5, $r4		; Load encrytion key
--4
	xor	$r3, $r3, $r5		; $r3 = A
	add	$r6, $r3, $r2           ; $r6 = A + C
	lsl	$r6, $r6		; $r6 = mod16(A + C) & 0000 
	lsr	$r3, $r3		; $r3 = 0000 & Ah
	add	$r3, $r3, $r6		; Concatenation

     	add	$r4, $r4, $r1		; Increment to next key part
	ldr	$r5, $r4		; Load encrytion key
--5
	xor	$r3, $r3, $r5		; $r3 = A
	add	$r6, $r3, $r2           ; $r6 = A + C
	lsl	$r6, $r6		; $r6 = mod16(A + C) & 0000 
	lsr	$r3, $r3		; $r3 = 0000 & Ah
	add	$r3, $r3, $r6		; Concatenation

     	add	$r4, $r4, $r1		; Increment to next key part
	ldr	$r5, $r4		; Load encrytion key
--6
	xor	$r3, $r3, $r5		; $r3 = A
	add	$r6, $r3, $r2           ; $r6 = A + C
	lsl	$r6, $r6		; $r6 = mod16(A + C) & 0000 
	lsr	$r3, $r3		; $r3 = 0000 & Ah
	add	$r3, $r3, $r6		; Concatenation

     	add	$r4, $r4, $r1		; Increment to next key part
	ldr	$r5, $r4		; Load encrytion key
--7
	xor	$r3, $r3, $r5		; $r3 = A
	add	$r6, $r3, $r2           ; $r6 = A + C
	lsl	$r6, $r6		; $r6 = mod16(A + C) & 0000 
	lsr	$r3, $r3		; $r3 = 0000 & Ah
	add	$r3, $r3, $r6		; Concatenation

     	add	$r4, $r4, $r1		; Increment to next key part
	ldr	$r5, $r4		; Load encrytion key
--8
	xor	$r3, $r3, $r5		; $r3 = A
	add	$r6, $r3, $r2           ; $r6 = A + C
	lsl	$r6, $r6		; $r6 = mod16(A + C) & 0000 
	lsr	$r3, $r3		; $r3 = 0000 & Ah
	add	$r3, $r3, $r6		; Concatenatio


61:	str	$r0, $r3		; Will reset PC to 0x01
