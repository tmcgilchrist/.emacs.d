-module(crud).

crud_test_() ->   
  {setup,
   fun() -> start() end,
   fun(_) -> stop() end,
   fun(_) ->
           [
            ?_assert(ok == create(#person{id = 1})),
            ?_assert(already_exists == create(#person{id=1})),
            ?_assert(#person{id=1} == retrieve(1)),
            ?_assert(ok == update(#person{id = 1, name="Ben"})),
            ?_assert(#person{id=1, name="Ben"} == retrieve(1)),
            ?_assert(ok == delete(1)),
            ?_assert(undefined == delete(2)),
            ?_assert(undefined == update(#person{id = 2}))
           ]
   end}.
