#!/usr/bin/env ruby -wKU

require "test/unit"
require "java_parser"

class TestJavaParser < Test::Unit::TestCase

  def setup
    @parser = JavaParser.new
  end

  def test_int_literal
    expected = Token.new(TokenType::INTLITERAL,  "1", 0)
    actual = @parser.parse("1")
    assert_equal(expected, actual)
  end

  def test_single_line_comment
    expected = Token.new(TokenType::COMMENT,  "//     \n", 0)
    actual = @parser.parse("//     \n")
    assert_equal(expected, actual)
  end

  def test_multiline_comment
    assert_equal(Token.new(TokenType::COMMENT, "/*  */", 0), 
                 @parser.parse("/*  */"))
    assert_equal(Token.new(TokenType::COMMENT, "/*** */", 0), 
                 @parser.parse("/*** */"))
    assert_equal(Token.new(TokenType::COMMENT, "/*** \n */", 0), 
                 @parser.parse("/*** \n */"))
  end

  def test_comment_parse_errors
    assert_raise(RuntimeError) { @parser.parse("/ \n") }
    assert_raise(RuntimeError) { @parser.parse("/   \n") }
    assert_raise(RuntimeError) { @parser.parse("/*   \n") }
  end
end
